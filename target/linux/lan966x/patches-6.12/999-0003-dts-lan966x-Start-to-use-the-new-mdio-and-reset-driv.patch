From 3dde29defbc7f88437b9ed1cf6b785ac13d65c71 Mon Sep 17 00:00:00 2001
From: Horatiu Vultur <horatiu.vultur@microchip.com>
Date: Wed, 16 Jul 2025 11:04:28 +0200
Subject: [PATCH 3/3] dts: lan966x: Start to use the new mdio and reset driver
 for pcb8290

Signed-off-by: Horatiu Vultur <horatiu.vultur@microchip.com>
---
 arch/arm/boot/dts/microchip/lan966x-pcb8290.dts | 10 ++++++++++
 1 file changed, 10 insertions(+)

diff --git a/arch/arm/boot/dts/microchip/lan966x-pcb8290.dts b/arch/arm/boot/dts/microchip/lan966x-pcb8290.dts
index 3b7577e48b467..e3f6b3ba802aa 100644
--- a/arch/arm/boot/dts/microchip/lan966x-pcb8290.dts
+++ b/arch/arm/boot/dts/microchip/lan966x-pcb8290.dts
@@ -19,6 +19,12 @@ gpio-restart {
 		gpios = <&gpio 56 GPIO_ACTIVE_LOW>;
 		priority = <200>;
 	};
+
+	phy_external_reset: phy_external_reset {
+		compatible = "microchip,lan966x-phy-reset-external";
+		#reset-cells = <1>;
+		phy-external-reset-gpios = <&gpio 53 GPIO_ACTIVE_LOW>;
+	};
 };
 
 &aes {
@@ -52,10 +58,14 @@ udc_pins: ucd-pins {
 };
 
 &mdio0 {
+	compatible = "microchip,lan9668-miim";
 	pinctrl-0 = <&miim_a_pins>;
 	pinctrl-names = "default";
 	status = "okay";
 
+	resets = <&phy_external_reset 0>;
+	reset-names = "phy";
+
 	ext_phy0: ethernet-phy@7 {
 		reg = <7>;
 		interrupts = <24 IRQ_TYPE_LEVEL_LOW>;
-- 
2.34.1

